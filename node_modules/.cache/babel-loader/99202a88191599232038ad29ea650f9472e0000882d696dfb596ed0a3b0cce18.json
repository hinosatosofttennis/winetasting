{"ast":null,"code":"import React from'react';import{auth,db}from'../firebaseConfig';import{GoogleAuthProvider,signInWithPopup,signOut}from'firebase/auth';import{doc,setDoc}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FirebaseAuth=_ref=>{let{user,loading}=_ref;const provider=new GoogleAuthProvider();const signInWithGoogle=async()=>{try{const result=await signInWithPopup(auth,provider);const userRef=doc(db,'users',result.user.uid);// „É¶„Éº„Ç∂„Éº„ÅåDB„Å´Â≠òÂú®„Åó„Å™„ÅÑÂ†¥Âêà„ÄÅÂü∫Êú¨ÊÉÖÂ†±„ÇíÁôªÈå≤\nawait setDoc(userRef,{uid:result.user.uid,email:result.user.email,displayName:result.user.displayName,createdAt:new Date()},{merge:true});}catch(error){console.error(\"Google„Çµ„Ç§„É≥„Ç§„É≥„Ç®„É©„Éº:\",error);alert(\"„Çµ„Ç§„É≥„Ç§„É≥„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ\");}};const handleLogout=()=>{signOut(auth).catch(error=>{console.error(\"„É≠„Ç∞„Ç¢„Ç¶„Éà„Ç®„É©„Éº:\",error);});};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u8A8D\\u8A3C\\u60C5\\u5831\\u3092\\u78BA\\u8A8D\\u4E2D...\"});return/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center'},children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u3088\\u3046\\u3053\\u305D\\u3001\",user.displayName||user.email,\"\\u3055\\u3093\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{padding:'10px',background:'#ccc'},children:\"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u30C6\\u30A4\\u30B9\\u30C6\\u30A3\\u30F3\\u30B0\\u5C65\\u6B74\\u3092\\u540C\\u671F\\u3059\\u308B\\u306B\\u306F\\u30ED\\u30B0\\u30A4\\u30F3\\u304C\\u5FC5\\u8981\\u3067\\u3059\\u3002\"}),/*#__PURE__*/_jsx(\"button\",{onClick:signInWithGoogle,style:{padding:'12px 24px',fontSize:'16px',background:'#4285F4',color:'white',border:'none',borderRadius:'5px'},children:\"\\uD83D\\uDE80 Google\\u3067\\u30ED\\u30B0\\u30A4\\u30F3 (\\u63A8\\u5968)\"})]})});};export default FirebaseAuth;","map":{"version":3,"names":["React","auth","db","GoogleAuthProvider","signInWithPopup","signOut","doc","setDoc","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FirebaseAuth","_ref","user","loading","provider","signInWithGoogle","result","userRef","uid","email","displayName","createdAt","Date","merge","error","console","alert","handleLogout","catch","children","style","padding","textAlign","onClick","background","fontSize","color","border","borderRadius"],"sources":["/workspaces/winetasting/src/components/FirebaseAuth.js"],"sourcesContent":["import React from 'react';\nimport { auth, db } from '../firebaseConfig';\nimport { GoogleAuthProvider, signInWithPopup, signOut } from 'firebase/auth';\nimport { doc, setDoc } from 'firebase/firestore';\n\nconst FirebaseAuth = ({ user, loading }) => {\n  const provider = new GoogleAuthProvider();\n\n  const signInWithGoogle = async () => {\n    try {\n      const result = await signInWithPopup(auth, provider);\n      const userRef = doc(db, 'users', result.user.uid);\n      \n      // „É¶„Éº„Ç∂„Éº„ÅåDB„Å´Â≠òÂú®„Åó„Å™„ÅÑÂ†¥Âêà„ÄÅÂü∫Êú¨ÊÉÖÂ†±„ÇíÁôªÈå≤\n      await setDoc(userRef, {\n        uid: result.user.uid,\n        email: result.user.email,\n        displayName: result.user.displayName,\n        createdAt: new Date()\n      }, { merge: true });\n\n    } catch (error) {\n      console.error(\"Google„Çµ„Ç§„É≥„Ç§„É≥„Ç®„É©„Éº:\", error);\n      alert(\"„Çµ„Ç§„É≥„Ç§„É≥„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ\");\n    }\n  };\n\n  const handleLogout = () => {\n    signOut(auth).catch((error) => {\n      console.error(\"„É≠„Ç∞„Ç¢„Ç¶„Éà„Ç®„É©„Éº:\", error);\n    });\n  };\n\n  if (loading) return <div>Ë™çË®ºÊÉÖÂ†±„ÇíÁ¢∫Ë™ç‰∏≠...</div>;\n\n  return (\n    <div style={{ padding: '20px', textAlign: 'center' }}>\n      {user ? (\n        <>\n          <p>„Çà„ÅÜ„Åì„Åù„ÄÅ{user.displayName || user.email}„Åï„Çì</p>\n          <button onClick={handleLogout} style={{ padding: '10px', background: '#ccc' }}>\n            „É≠„Ç∞„Ç¢„Ç¶„Éà\n          </button>\n        </>\n      ) : (\n        <>\n          <p>„ÉÜ„Ç§„Çπ„ÉÜ„Ç£„É≥„Ç∞Â±•Ê≠¥„ÇíÂêåÊúü„Åô„Çã„Å´„ÅØ„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ</p>\n          <button \n            onClick={signInWithGoogle} \n            style={{ \n              padding: '12px 24px', \n              fontSize: '16px', \n              background: '#4285F4', \n              color: 'white', \n              border: 'none', \n              borderRadius: '5px' \n            }}\n          >\n            üöÄ Google„Åß„É≠„Ç∞„Ç§„É≥ (Êé®Â•®)\n          </button>\n          {/* E„É°„Éº„É´/„Éë„Çπ„ÉØ„Éº„ÉâË™çË®º„Å™„Å©„ÄÅ‰ªñ„ÅÆË™çË®º„Ç™„Éó„Ç∑„Éß„É≥„Çí„Åì„Åì„Å´ËøΩÂä†„Åß„Åç„Åæ„Åô */}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default FirebaseAuth;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,CAAEC,EAAE,KAAQ,mBAAmB,CAC5C,OAASC,kBAAkB,CAAEC,eAAe,CAAEC,OAAO,KAAQ,eAAe,CAC5E,OAASC,GAAG,CAAEC,MAAM,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEjD,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAuB,IAAtB,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAAF,IAAA,CACrC,KAAM,CAAAG,QAAQ,CAAG,GAAI,CAAAf,kBAAkB,CAAC,CAAC,CAEzC,KAAM,CAAAgB,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAhB,eAAe,CAACH,IAAI,CAAEiB,QAAQ,CAAC,CACpD,KAAM,CAAAG,OAAO,CAAGf,GAAG,CAACJ,EAAE,CAAE,OAAO,CAAEkB,MAAM,CAACJ,IAAI,CAACM,GAAG,CAAC,CAEjD;AACA,KAAM,CAAAf,MAAM,CAACc,OAAO,CAAE,CACpBC,GAAG,CAAEF,MAAM,CAACJ,IAAI,CAACM,GAAG,CACpBC,KAAK,CAAEH,MAAM,CAACJ,IAAI,CAACO,KAAK,CACxBC,WAAW,CAAEJ,MAAM,CAACJ,IAAI,CAACQ,WAAW,CACpCC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CACtB,CAAC,CAAE,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,CAErB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAAC,CACvCE,KAAK,CAAC,eAAe,CAAC,CACxB,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB1B,OAAO,CAACJ,IAAI,CAAC,CAAC+B,KAAK,CAAEJ,KAAK,EAAK,CAC7BC,OAAO,CAACD,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACnC,CAAC,CAAC,CACJ,CAAC,CAED,GAAIX,OAAO,CAAE,mBAAOR,IAAA,QAAAwB,QAAA,CAAK,qDAAW,CAAK,CAAC,CAE1C,mBACExB,IAAA,QAAKyB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAH,QAAA,CAClDjB,IAAI,cACHL,KAAA,CAAAE,SAAA,EAAAoB,QAAA,eACEtB,KAAA,MAAAsB,QAAA,EAAG,gCAAK,CAACjB,IAAI,CAACQ,WAAW,EAAIR,IAAI,CAACO,KAAK,CAAC,cAAE,EAAG,CAAC,cAC9Cd,IAAA,WAAQ4B,OAAO,CAAEN,YAAa,CAACG,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEG,UAAU,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAC,gCAE/E,CAAQ,CAAC,EACT,CAAC,cAEHtB,KAAA,CAAAE,SAAA,EAAAoB,QAAA,eACExB,IAAA,MAAAwB,QAAA,CAAG,8JAA0B,CAAG,CAAC,cACjCxB,IAAA,WACE4B,OAAO,CAAElB,gBAAiB,CAC1Be,KAAK,CAAE,CACLC,OAAO,CAAE,WAAW,CACpBI,QAAQ,CAAE,MAAM,CAChBD,UAAU,CAAE,SAAS,CACrBE,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAChB,CAAE,CAAAT,QAAA,CACH,kEAED,CAAQ,CAAC,EAET,CACH,CACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}