{"ast":null,"code":"import _objectSpread from\"/workspaces/winetasting/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{initialOptions}from'./TastingData';import{fetchCustomOptions,saveCustomOptions}from'../utils/Firestore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SettingsView=_ref=>{let{user}=_ref;const[options,setOptions]=useState(initialOptions);const[newOption,setNewOption]=useState('');const[targetList,setTargetList]=useState('countries');// 編集対象リスト\n// 既存のカスタムオプションを読み込み\nuseEffect(()=>{if(user){fetchCustomOptions(user.uid).then(custom=>{setOptions(prev=>_objectSpread(_objectSpread({},prev),custom));});}},[user]);const handleAddOption=async()=>{if(!newOption.trim())return;const updatedList=[...options[targetList],newOption.trim()];const newOptions=_objectSpread(_objectSpread({},options),{},{[targetList]:updatedList});try{await saveCustomOptions(user.uid,newOptions);setOptions(newOptions);setNewOption('');alert('✅ 新しい選択肢を追加しました！');}catch(e){alert('追加に失敗しました: '+e.message);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u8A2D\\u5B9A: \\u30AB\\u30B9\\u30BF\\u30E0\\u9078\\u629E\\u80A2\\u306E\\u7BA1\\u7406\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setTargetList(e.target.value),value:targetList,children:[/*#__PURE__*/_jsx(\"option\",{value:\"countries\",children:\"\\u751F\\u7523\\u56FD\\u30EA\\u30B9\\u30C8\"}),/*#__PURE__*/_jsx(\"option\",{value:\"redGrapes\",children:\"\\u8D64\\u30EF\\u30A4\\u30F3\\u54C1\\u7A2E\\u30EA\\u30B9\\u30C8\"}),/*#__PURE__*/_jsx(\"option\",{value:\"whiteGrapes\",children:\"\\u767D\\u30EF\\u30A4\\u30F3\\u54C1\\u7A2E\\u30EA\\u30B9\\u30C8\"})]}),/*#__PURE__*/_jsxs(\"h3\",{children:[targetList,\" (\\u73FE\\u5728\\u306E\\u30EA\\u30B9\\u30C8: \",options[targetList].length,\"\\u4EF6)\"]}),/*#__PURE__*/_jsx(\"ul\",{children:options[targetList].map((item,index)=>/*#__PURE__*/_jsx(\"li\",{children:item},index))}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newOption,onChange:e=>setNewOption(e.target.value),placeholder:\"\\u65B0\\u3057\\u3044\\u9078\\u629E\\u80A2\\u3092\\u5165\\u529B\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddOption,children:\"\\u8FFD\\u52A0\"})]});};export default SettingsView;","map":{"version":3,"names":["React","useState","useEffect","initialOptions","fetchCustomOptions","saveCustomOptions","jsx","_jsx","jsxs","_jsxs","SettingsView","_ref","user","options","setOptions","newOption","setNewOption","targetList","setTargetList","uid","then","custom","prev","_objectSpread","handleAddOption","trim","updatedList","newOptions","alert","e","message","style","padding","children","onChange","target","value","length","map","item","index","type","placeholder","onClick"],"sources":["/workspaces/winetasting/src/components/SettingsView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { initialOptions } from './TastingData';\nimport { fetchCustomOptions, saveCustomOptions } from '../utils/Firestore';\n\nconst SettingsView = ({ user }) => {\n    const [options, setOptions] = useState(initialOptions);\n    const [newOption, setNewOption] = useState('');\n    const [targetList, setTargetList] = useState('countries'); // 編集対象リスト\n    \n    // 既存のカスタムオプションを読み込み\n    useEffect(() => {\n        if (user) {\n            fetchCustomOptions(user.uid).then(custom => {\n                setOptions(prev => ({ ...prev, ...custom }));\n            });\n        }\n    }, [user]);\n\n    const handleAddOption = async () => {\n        if (!newOption.trim()) return;\n        \n        const updatedList = [...options[targetList], newOption.trim()];\n        const newOptions = { ...options, [targetList]: updatedList };\n\n        try {\n            await saveCustomOptions(user.uid, newOptions);\n            setOptions(newOptions);\n            setNewOption('');\n            alert('✅ 新しい選択肢を追加しました！');\n        } catch (e) {\n            alert('追加に失敗しました: ' + e.message);\n        }\n    };\n\n    return (\n        <div style={{ padding: '20px' }}>\n            <h2>設定: カスタム選択肢の管理</h2>\n            \n            <select onChange={(e) => setTargetList(e.target.value)} value={targetList}>\n                <option value=\"countries\">生産国リスト</option>\n                <option value=\"redGrapes\">赤ワイン品種リスト</option>\n                <option value=\"whiteGrapes\">白ワイン品種リスト</option>\n            </select>\n            \n            <h3>{targetList} (現在のリスト: {options[targetList].length}件)</h3>\n            \n            {/* リスト表示（削除機能なども必要） */}\n            <ul>\n                {options[targetList].map((item, index) => (\n                    <li key={index}>{item}</li>\n                ))}\n            </ul>\n\n            {/* 新規追加フォーム */}\n            <input \n                type=\"text\" \n                value={newOption} \n                onChange={(e) => setNewOption(e.target.value)} \n                placeholder=\"新しい選択肢を入力\"\n            />\n            <button onClick={handleAddOption}>追加</button>\n        </div>\n    );\n};\n\nexport default SettingsView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}